# 餐饮管理系统（商家端）开发分工文档

## 1. 小组成员分工

| 成员 | 负责模块 | 核心职责 |
|------|----------|----------|
| **成员 A** | **订单与桌台管理** | 负责开发桌台状态的实时视图，以及关联订单的查询与管理功能。 |
| **成员 B** | **员工与考勤管理** | 负责开发员工的排班、信息管理及考勤打卡与记录查询功能。 |
| **成员 C** | **库存与菜单管理** | 负责开发原材料的库存监控、采购入库以及菜单（菜品与分类）的维护功能。 |

---

## 2. 详细功能点与分工

### 2.1 成员 A：订单与桌台管理

**核心目标**：提供一个直观的界面，让商家可以实时监控所有桌台的状态，并快速查看和处理相关订单。

**详细功能点**：

1. **桌台视图模块**
   * **功能**：以图形化（如网格布局）方式展示所有桌台。
   * **状态显示**：根据 `TableInfo` 表的 `Status` 字段，用不同颜色或图标区分桌台状态（如：绿色-空闲，橙色-占用，蓝色-预订）。
   * **信息悬浮提示**：鼠标悬停在桌台上时，显示桌台号、容量、区域等信息。
   * **桌台操作**：
     * 点击"占用"状态的桌台，可查看当前订单详情。
     * 点击"空闲"状态的桌台，可进行"开台"操作（创建新订单）。
     * 提供桌台状态手动修改功能（如：占用 -> 清洁中 -> 空闲）。

2. **订单详情模块**
   * **功能**：查看指定桌台或订单的详细信息。
   * **信息展示**：显示订单号、下单时间、服务员、总金额、订单状态。
   * **菜品列表**：展示该订单包含的所有菜品（`OrderDetail`），包括菜品名、数量、单价、小计。
   * **订单操作**：
     * **加菜**：为当前订单添加新的菜品。
     * **结账**：修改 `Orders` 表的 `OrderStatus` 为"已结账"，并更新 `TableInfo` 表的 `Status` 为"清洁中"。
     * **打印小票**：生成订单的消费凭证。

**关联数据库表**：`Orders`, `OrderDetail`, `TableInfo`, `Dish`, `Staff`, `Customer`

**对应功能点**：

* 订单全流程管理（创建订单、状态更新、退单/退款记录）
* 历史订单查询（支持多条件筛选）
* 需添加桌台管理等功能。。。

---

### 2.2 成员 B：员工与考勤管理

**核心目标**：实现对员工排班、信息和出勤情况的全面管理，确保人力资源调配合理高效。

**详细功能点**：

1. **员工信息管理**
   * **功能**：实现对员工信息的增、删、改、查。
   * **列表展示**：以列表形式展示所有员工，支持按姓名、部门、职位进行搜索和筛选。
   * **信息维护**：可编辑员工的职位、电话、薪资、状态（在职/离职）等。

2. **排班管理模块**
   * **功能**：为员工安排工作日程。
   * **排班视图**：提供日历视图，可直观地查看和编辑每日的员工排班情况。
   * **排班操作**：
     * 为指定员工在特定日期安排班次（如：早班、晚班）。
     * 更新 `Staff` 表中的 `WorkSchedule` 字段（或如果设计复杂，可新增排班表）。

3. **考勤管理模块**
   * **功能**：记录和查询员工的考勤情况。
   * **打卡接口**：提供一个简单的界面供员工进行上班（CheckIn）和下班（CheckOut）打卡操作，记录到 `Attendance` 表。
   * **考勤记录查询**：
     * 按日期范围和员工姓名查询考勤记录。
     * 自动计算实际工作时长，并高亮显示迟到、早退等异常状态。

**关联数据库表**：`Staff`, `Department`, `Attendance`

**对应功能点**：

* 排班管理（排班表生成、紧急调班处理）
* 考勤与绩效（打卡记录、绩效统计）
* 需添加员工信息管理等功能。。。

---

### 2.3 成员 C：库存与菜单管理

**核心目标**：确保菜单信息的准确性，并对餐厅的原材料库存进行有效监控和管理，防止缺货或浪费。

**详细功能点**：

1. **菜单管理模块**
   * **功能**：对菜品分类和具体菜品进行增、删、改、查。
   * **分类管理**：维护 `Category` 表，支持分类的添加、重命名和排序。
   * **菜品管理**：
     * 以列表形式展示所有菜品，支持按分类、名称进行筛选和搜索。
     * 可编辑菜品信息，包括名称、价格、图片、描述以及是否可售（`IsAvailable`）。
     * **配方关联**：在编辑菜品时，可以关联 `Recipe` 表，设置该菜品所需的原材料及用量。

2. **原材料库存管理**
   * **功能**：实时监控原材料库存，并进行入库管理。
   * **库存看板**：
     * 以列表形式展示所有 `RawMaterial` 的信息。
     * **库存预警**：当 `CurrentStock` 低于 `MinStock` 时，高亮显示该原材料，提醒采购。
   * **采购与入库**：
     * 创建采购单（`PurchaseRecord` 和 `PurchaseDetail`）。
     * **一键入库**：当采购的原材料到货后，提供"确认入库"功能，将采购数量自动增加到 `RawMaterial` 的 `CurrentStock` 中，并更新 `LastInTime` 和 `LastInQuantity`。

3. **供应商管理**
   * **功能**：对供应商信息进行增、删、改、查。
   * **列表展示**：展示所有供应商信息，并可查看其主要供应产品。

**关联数据库表**：`Dish`, `Category`, `Recipe`, `RawMaterial`, `Supplier`, `PurchaseRecord`, `PurchaseDetail`

**对应功能点**：

* 库存动态管理（采购入库、自动扣减、调拨记录）
* 实时库存查询（多维度报表展示）
* 库存预警与处理（阈值提醒、过期食材自动清理）
* 供应商信息管理（新增/评价/维护供应商）
* 采购记录登记（关联库存与成本统计）
* 菜品基础管理（添加/更新/下架菜品）
* 菜品筛选与展示（按分类/价格/销量排序）
* 菜品生命周期管理（如季节性菜单推荐、热销品标记）
* 菜品成本分析（成本与毛利率计算）
* 需要促销活动接口。。。

---

## 3. 需要为其他组提供的接口

以下是本商家端系统需要向外（如客户点餐小程序、老板数据看板等）提供的 API 接口。

| 提供方 | 接口名称 | 接口功能描述 | 潜在消费方 |
|--------|----------|-------------|-----------|
| **成员 A** | `GET /api/tables` | 获取所有桌台的实时状态列表。 | 客户小程序、前台接待系统 |
| **成员 A** | `GET /api/orders/{orderId}` | 获取指定订单的详细信息，包括菜品列表。 | 客户小程序（查询自己订单） |
| **成员 A** | `POST /api/orders` | 创建一个新订单（开台或客户自助下单）。 | 客户小程序、服务员点餐App |
| **成员 C** | `GET /api/menu` | 获取完整的菜单信息，包括所有分类和菜品。 | 客户小程序、服务员点餐App |
| **成员 C** | `GET /api/dishes/{dishId}` | 获取单个菜品的详细信息，包括价格、图片、描述。 | 客户小程序 |
| **成员 C** | `GET /api/promotions` | 获取当前正在进行的促销活动信息。 | 客户小程序 |
